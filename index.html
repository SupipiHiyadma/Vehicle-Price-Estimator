<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>Vehicle Cost Calculator</title>

<meta name="theme-color" content="#FFD700" />
<link rel="manifest" href="manifest.webmanifest">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<link rel="apple-touch-icon" href="icons/icon-192.svg">

<style>
  :root{
    --gold:#FFD700; --gold-2:#E6BE8A; --text:#111827; --muted:#6B7280;
    --card:#FFFFFF; --soft:#F9FAFB; --border:#E5E7EB; --warn:#FFF7CC; --warn-b:#FDE047;
  }
  @media (prefers-color-scheme: dark){
    :root{ --text:#F9FAFB; --muted:#C7D2FE; --card:#0B1220; --soft:#0F172A; --border:#24314A; --warn:#3A3200; --warn-b:#614D00; }
    body{ background:#0A1222; }
  }
  body{margin:0;font:16px/1.45 system-ui,-apple-system,"Segoe UI",Roboto,Helvetica,Arial;color:var(--text);background:#f6f8fc}
  header{background: linear-gradient(120deg, var(--gold), var(--gold-2));color:#fff; padding:16px 14px;}
  header h1{margin:0;font-size:20px}
  main{max-width:960px;margin:14px auto;padding:0 12px;display:grid;gap:12px}
  .card{background:var(--card);border:1px solid var(--border);border-radius:14px;box-shadow:0 10px 24px rgba(2,8,23,.04);padding:14px}
  h2{margin:0 0 10px;font-size:18px}
  label{font-weight:600;font-size:14px;color:var(--muted)}
  input,select{width:100%;padding:12px;border:1px solid var(--border);border-radius:12px}
  .row{display:grid;gap:10px;margin-bottom:10px}
  .row.two{grid-template-columns:1fr 1fr}
  .btn{padding:12px;border:0;border-radius:12px;background:var(--gold);font-weight:800;cursor:pointer;width:100%}
  table{width:100%;border-collapse:collapse}
  th,td{padding:8px;border-bottom:1px dashed var(--border);text-align:right}
  th:first-child,td:first-child{text-align:left}
  tfoot td{font-weight:800}
</style>
</head>
<body>
<header>
  <h1>Vehicle Cost Calculator</h1>
</header>

<main>
  <section class="card">
    <h2>Inputs</h2>

    <div class="row two">
      <div>
        <label for="fuel">Fuel Type</label>
        <select id="fuel">
          <option value="Petrol">Petrol - 8703.21 - 8703.24</option>
          <option value="Diesel">Diesel - 8703.31 - 8703.33</option>
          <option value="Petrol Hybrid" selected>Petrol Hybrid - 8703.40 - 8703.60</option>
          <option value="Diesel Hybrid">Diesel Hybrid - 8703.50 - 8703.70</option>
          <option value="Electric Only">Electric Only - 8703.8</option>
        </select>
      </div>
      <div>
        <label for="cc">Engine CC</label>
        <input id="cc" type="number" value="1500" />
      </div>
    </div>

    <div class="row two">
      <div>
        <label for="priceJpy">Vehicle Price (JPY)</label>
        <input id="priceJpy" type="number" value="19802" />
      </div>
      <div>
        <label for="jpyRate">JPY → LKR Rate</label>
        <input id="jpyRate" type="number" value="2.1" />
      </div>
    </div>

    <div class="row two">
      <div>
        <label for="otherCharges">Other Charges</label>
        <input id="otherCharges" type="number" value="150000" />
      </div>
      <div>
        <label>Administration Charge</label>
        <div class="row two" style="margin:0">
          <div>
            <input id="adminPct" type="number" value="0" />
            <div style="font-size:12px;color:var(--muted)">Percent of CIF (%)</div>
          </div>
          <div>
            <input id="adminFlat" type="number" value="0" />
            <div style="font-size:12px;color:var(--muted)">OR flat amount (LKR)</div>
          </div>
        </div>
      </div>
    </div>

    <div class="row two">
      <div>
        <label for="qty">Number of Vehicles</label>
        <input id="qty" type="number" value="1" />
      </div>
      <div>
        <button id="calcBtn" class="btn">Calculate</button>
      </div>
    </div>
  </section>

  <section class="card">
    <h2>Breakdown</h2>
    <table id="result">
      <thead><tr><th>Component</th><th>Amount (LKR)</th></tr></thead>
      <tbody></tbody>
      <tfoot>
        <tr><td>Total Duty Per Vehicle</td><td id="totalDutyPerVehicle">—</td></tr>
        <tr><td>Per-vehicle Cost</td><td id="totalPerVehicle">—</td></tr>
        <tr><td>Number of Vehicles</td><td id="totalQty">—</td></tr>
        <tr><td><b>Grand Total</b></td><td id="total">—</td></tr>
      </tfoot>
    </table>
  </section>
</main>

<script>
  // (Calculation logic shortened for clarity, uses your existing JS)
  const fmt = n => isFinite(n) ? Number(n).toLocaleString() : "—";

  function calc() {
    const CIF  = (+document.getElementById("priceJpy").value) * (+document.getElementById("jpyRate").value);
    const cid  = 0.30 * CIF;
    const pal  = 0.10 * CIF;
    const excise = 1000; // placeholder logic
    const luxury = 0; // placeholder
    const vat = 0.18 * (CIF + cid + pal + excise + luxury);
    const vel = 15000, exm = 1750;
    const admin = (+document.getElementById("adminPct").value/100) * CIF + (+document.getElementById("adminFlat").value);
    const other = +document.getElementById("otherCharges").value;
    const perVehicle = CIF+cid+pal+excise+luxury+vat+vel+exm+admin+other;
    const qty = +document.getElementById("qty").value;
    const grandTotal = perVehicle * qty;
    const totalDutyPerVehicle = perVehicle - CIF - admin - other;

    const rows = [
      ["CIF (LKR)", CIF],
      ["CID + Sur (30% of CIF)", cid],
      ["PAL (10% of CIF)", pal],
      ["Excise Duty", excise],
      ["Luxury Tax", luxury],
      ["VAT", vat],
      ["VEL Fixed", vel],
      ["EXM Fixed", exm],
      ["Administration Charge", admin],
      ["Other Charges", other],
    ];
    document.querySelector("#result tbody").innerHTML =
      rows.map(([k,v])=>`<tr><td>${k}</td><td>${fmt(v)}</td></tr>`).join("");
    document.getElementById("totalDutyPerVehicle").textContent = fmt(totalDutyPerVehicle);
    document.getElementById("totalPerVehicle").textContent = fmt(perVehicle);
    document.getElementById("totalQty").textContent = fmt(qty);
    document.getElementById("total").textContent = fmt(grandTotal);
  }

  document.getElementById("calcBtn").addEventListener("click", calc);
</script>
</body>
</html>
